---
import BaseLayout from '../../layouts/BaseLayout.astro';
import Header from '../../components/Header.astro';
import Navigation from '../../components/Navigation.astro';
import Footer from '../../components/Footer.astro';
import { getCollection } from 'astro:content';
import { getAllTags } from '../../utils/sortPosts';

const allBlogPosts = await getCollection('blog');
const allProjects = await getCollection('projects');
const allPosts = [...allBlogPosts, ...allProjects];
const tags = getAllTags(allPosts);
---

<BaseLayout title="Tags" description="Browse posts by tags.">
  <div class="container mx-auto px-4 max-w-4xl min-h-screen flex flex-col">
    <Navigation currentPath="/tags" />

    <main class="animate-fade-in flex-1">
      <h1 class="text-4xl font-bold mb-12 text-gray-900">
        <span style="background: linear-gradient(to right, var(--blue), var(--green)); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent;">
          Tags
        </span>
      </h1>

      <div class="flex flex-wrap gap-3">
        {
          tags.map((tag) => (
            <a
              href={`/tags/${tag.toLowerCase().replace(/\s+/g, '-')}`}
              class="px-4 py-2 bg-primary-100 text-primary-700 rounded-full hover:bg-primary-200 transition-colors font-medium"
            >
              {tag}
            </a>
          ))
        }
      </div>
    </main>

    <Footer />
  </div>
</BaseLayout>
